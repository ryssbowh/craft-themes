(function(){var e={5225:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,".heading[data-v-b64f69bc]{margin:11px 24px 14px 24px}.sidebar nav li ul[data-v-b64f69bc]{display:block}",""]),t["default"]=n},4530:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,".icon.delete[data-v-7a9afd8c],.icon.edit[data-v-7a9afd8c]{margin-left:10px;margin-right:0!important;cursor:pointer}.icon.delete[data-v-7a9afd8c]:before,.icon.edit[data-v-7a9afd8c]:before{margin-top:-3px}#tabs[data-v-7a9afd8c]{position:relative;min-height:40px}#tabs ul[data-v-7a9afd8c]{overflow:hidden;flex:1}.add-viewmode[data-v-7a9afd8c]{font-size:14px;margin-left:10px}.heading[data-v-7a9afd8c]{text-transform:uppercase;padding-right:10px;color:#596673;font-size:11px;font-weight:700}",""]),t["default"]=n},5367:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,"#toolbar{justify-content:end}",""]),t["default"]=n},8476:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,".btn[disabled][data-v-51f39d2d]{opacity:.5}",""]),t["default"]=n},7249:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,".display-table .col.options{display:flex}.display-table .col.move{padding-left:5px;display:flex}.display-table .head{font-weight:700;background:#f3f7fc;border-radius:5px}.display-table .head .col{padding:7px 8px}.display-table .line{display:grid;grid-template-columns:5% 20% 16% 17% 17% 19% 6%;align-items:center;margin:0 0 7px 0;width:100%}.display-table .line.flex{display:flex}.display-table .line.opaque,.display-table .line.opaque~.sub-fields{opacity:.5}.display-table .line.bg-grey{background:#f3f7fc}.display-table .line.with-handles{grid-template-columns:5% 14% 13% 14% 16% 16% 16% 6%}.display-table .line.has-sub-fields{display:flex;flex-direction:column;border-radius:5px;padding:7px 0}.display-table .line.no-margin{margin:0}.display-table .line.no-padding{padding:0}.display-table .block-type-name{width:5%;opacity:.7;white-space:nowrap;margin-bottom:0}.display-table .sub-fields{width:100%;transition:opacity .3s}.display-table .sub-fields .line:last-child{margin-bottom:0}.display-table .indented-1 .indented{padding-left:20%}.display-table .indented-2 .indented{padding-left:40%}.display-table .indented-3 .indented{padding-left:60%;padding-left:80%}.display-table .body .col:not(.move){padding:0 10px}.display-table .body .col.move,.display-table .body .col.options{padding-bottom:4px}.themes-displays{position:relative}.themes-displays .title{justify-content:space-between}.spinner-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1000}.spinner-wrapper .spinner{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}",""]),t["default"]=n},3700:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,".delete[data-v-6803d8d4]{margin-left:3px}.group[data-v-6803d8d4]{position:relative;border-radius:5px;border:1px solid #e4edf6}.group .no-displays[data-v-6803d8d4]{position:absolute;left:15px;top:50px;opacity:.7}.group .sub-fields[data-v-6803d8d4]{min-height:34px}",""]),t["default"]=n},6482:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,".display-table .group .displays .col.move{justify-content:center}",""]),t["default"]=n},5698:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,"input[disabled][data-v-57b19d03]{background:hsla(0,0%,90%,.7)}.modal[data-v-57b19d03]{padding-bottom:62px;max-height:307px!important;max-width:300px!important;min-height:unset!important;min-width:unset!important}.modal .body[data-v-57b19d03]{height:calc(100% - 65px)}",""]),t["default"]=n},5573:function(e,t,i){"use strict";i.r(t);var l=i(8081),a=i.n(l),o=i(3645),s=i.n(o),n=s()(a());n.push([e.id,"input[disabled][data-v-a04944e2]{background:hsla(0,0%,90%,.7)}.modal[data-v-a04944e2]{padding-bottom:62px;max-height:307px!important;max-width:300px!important;min-height:unset!important;min-width:unset!important}.modal .body[data-v-a04944e2]{height:calc(100% - 65px)}",""]),t["default"]=n},5916:function(e,t,i){"use strict";var l=i(821),a=i(8162),o=i(6486);function s(e){e.response?Craft.cp.displayError(e.response.data.message):Craft.cp.displayError(e)}function n(e){for(let t in e)for(let i in e[t].displays){let l=e[t].displays[i].item.options;Array.isArray(l)&&(e[t].displays[i].item.options={})}return e}function d(e,t,i){let l=document.location.pathname.split("/"),a=l.findIndex((e=>"display"==e));-1!==a&&(l[a+1]==e&&l[a+2]==t&&l[a+3]==i||(l[a+1]=e,l[a+2]=t,l[a+3]=i,window.history.pushState({},"",l.join("/"))))}const r=e=>(0,a.MT)({state(){return{theme:null,layout:{},layouts:[],allLayouts:{},isFetching:!1,isSaving:!1,viewModes:[],viewMode:null,showGroupModal:!1,editedGroupUid:null,showFieldHandles:!1,itemsVisibility:!1,labelsVisibility:!1,switchItemsVisibility:0,switchLabelsVisibility:0}},mutations:{setShowFieldHandles(e,t){e.showFieldHandles=t},setTheme(e,t){e.theme=t,e.layouts=e.allLayouts[t]},setLayout(e,t){for(let i in e.layouts)if(e.layouts[i].id==t){e.layout=e.layouts[i];break}},setAllLayouts(e,t){e.allLayouts=t},setIsFetching(e,t){e.isFetching=t},setViewMode(e,t){e.viewMode=t},setViewModes(e,t){e.viewModes=t},addViewMode(e,t){e.viewModes.push(t)},editViewMode(e,{originalHandle:t,name:i,handle:l}){for(let a in e.viewModes)if(e.viewModes[a].handle==t)return e.viewModes[a].name=i,void(e.viewModes[a].handle=l)},deleteViewMode(e,t){e.viewModes=(0,o.filter)(e.viewModes,(e=>e.handle!=t.handle))},updateDisplay(e,{uid:t,data:i}){let l;for(let a in e.viewModes)for(let o in e.viewModes[a].displays)if(l=e.viewModes[a].displays[o],l.uid==t){for(let e in i)l[e]=i[e];break}},updateItem(e,{displayUid:t,data:i}){let l;for(let a in e.viewModes)for(let o in e.viewModes[a].displays){if(l=e.viewModes[a].displays[o],l.uid!=t)continue;let s=l.item;for(let e in i)s[e]=i[e];break}},removeDisplay(e,t){let i=e.viewMode.displays.filter((e=>e.uid!=t.uid));e.viewMode.displays=i},addDisplay(e,t){e.viewMode.displays.push(t)},removeDisplayFromGroup(e,{display:t,groupUid:i}){let l;for(let a in e.viewMode.displays)if(l=e.viewMode.displays[a],l.uid==i)break;l.item.displays=l.item.displays.filter((e=>e.uid!=t.uid))},addDisplayToGroup(e,{display:t,groupUid:i}){let l;for(let a in e.viewMode.displays)if(l=e.viewMode.displays[a],l.uid==i)break;l.item.displays.push(t)},setIsSaving(e,t){e.isSaving=t},setShowGroupModal(e,{show:t,editUid:i=null}){e.showGroupModal=t,e.editedGroupUid=i},setItemsVisibility(e,t){e.itemsVisibility=t,e.switchItemsVisibility=Date.now()},setLabelsVisibility(e,t){e.labelsVisibility=t,e.switchLabelsVisibility=Date.now()}},actions:{cloneDisplay(t,i){return e.config.globalProperties.cloneDisplay(i)},setLayout({commit:e,dispatch:t},{layoutId:i,viewModeHandle:l}){e("setLayout",i),t("fetchViewModes",l)},setViewModeByHandle({state:e,dispatch:t},{handle:i,setUrl:l=!0}){for(let a in e.viewModes)if(e.viewModes[a].handle==i){t("setViewMode",{viewMode:e.viewModes[a],setUrl:l});break}},setViewMode({commit:e,state:t},{viewMode:i,setUrl:l=!0}){e("setViewMode",i),l&&d(t.theme,t.layout.id,i.handle)},fetchViewModes({state:e,commit:t,dispatch:i},l){return t("setIsFetching",!0),axios.post(Craft.getCpUrl("themes/ajax/view-modes"),{layoutId:e.layout.id}).then((a=>{t("setViewModes",n(a.data.viewModes));let o=l&&e.viewModes.filter((e=>e.handle==l)).length;o?i("setViewModeByHandle",{handle:l}):i("setViewMode",{viewMode:e.viewModes[0]})})).catch((e=>{s(e)})).finally((()=>{t("setIsFetching",!1)}))},save({commit:e,state:t,dispatch:i}){e("setIsSaving",!0),axios({method:"post",url:Craft.getCpUrl("themes/ajax/view-modes/save"),data:{layoutId:t.layout.id,viewModes:t.viewModes}}).then((l=>{e("setViewModes",n(l.data.viewModes)),i("setViewModeByHandle",{handle:t.viewMode.handle,setUrl:!1}),Craft.cp.displayNotice(l.data.message)})).catch((l=>{s(l),l.response.data.viewModes&&(e("setViewModes",n(l.response.data.viewModes)),i("setViewModeByHandle",{handle:t.viewMode.handle,setUrl:!1}))})).finally((()=>{e("setIsSaving",!1)}))},editViewMode({state:e,commit:t},{originalHandle:i,name:l,handle:a}){i!=a&&d(e.theme,e.layout.id,a),t("editViewMode",{originalHandle:i,name:l,handle:a})},addViewMode({commit:e,state:t,dispatch:i},l){l.layout_id=t.layout.id;let a=[],o=[];for(let s in t.viewMode.displays)o.push(i("cloneDisplay",t.viewMode.displays[s]).then((e=>{a.push(e)})));Promise.all(o).then((()=>{l.displays=a,e("addViewMode",l),i("setViewMode",{viewMode:l})}))},deleteViewMode({commit:e,state:t,dispatch:i},l){e("deleteViewMode",l),i("setViewMode",{viewMode:t.viewModes[0]})}}}),c={class:"btngroup"},p={key:0,type:"button",class:"btn menubtn","data-icon":"brush"},h={key:1,class:"menu"},u={class:"padded"},m=["onClick"];function y(e,t,i,a,o,s){return(0,l.openBlock)(),(0,l.createElementBlock)("div",c,[e.theme?((0,l.openBlock)(),(0,l.createElementBlock)("button",p,(0,l.toDisplayString)(i.themes[e.theme].name),1)):(0,l.createCommentVNode)("",!0),e.theme?((0,l.openBlock)(),(0,l.createElementBlock)("div",h,[(0,l.createElementVNode)("ul",u,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(i.themes,(t=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:t.handle},[(0,l.createElementVNode)("a",{class:(0,l.normalizeClass)({sel:e.theme==t.handle}),href:"#",onClick:(0,l.withModifiers)((e=>s.changeTheme(t.handle)),["prevent"])},(0,l.toDisplayString)(t.name),11,m)])))),128))])])):(0,l.createCommentVNode)("",!0)])}var v={props:{initialTheme:{type:String,default:null},themes:{type:Object,default:null},allLayouts:{type:Object,default:null},currentLayout:{type:Number,default:null},currentViewModeHandle:{type:String,default:null},showFieldHandles:{type:Number,default:null}},computed:{...(0,a.rn)(["theme","layouts","layout","viewMode"])},created(){this.setShowFieldHandles(this.showFieldHandles),this.setAllLayouts(this.allLayouts),this.setTheme(this.initialTheme);let e=this.currentLayout&&this.allLayouts[this.initialTheme].filter((e=>e.id==this.currentLayout)).length;e?this.setLayout({layoutId:this.currentLayout,viewModeHandle:this.currentViewModeHandle}):this.layouts[0]&&this.setLayout({layoutId:this.layouts[0].id}),!e&&this.currentLayout&&Craft.cp.displayError(this.t("Requested layout doesn't exist, defaulting to {layout}",{layout:this.layouts[0].description})),window.addEventListener("popstate",(()=>{const e=document.location.pathname.split("/");let t,i=e.findIndex((e=>"display"==e)),l="";-1!==i&&("undefined"!=typeof e[i+1]&&e[i+1]!=this.theme&&this.setTheme(e[i+1]),"undefined"!=typeof e[i+2]&&e[i+2]!=this.layout.id&&(t=e[i+2]),"undefined"!=typeof e[i+3]&&(l=e[i+3]),t?this.setLayout({layoutId:e[i+2],viewModeHandle:l}):l&&this.setViewModeByHandle(l))}))},methods:{changeTheme:function(e){if(!confirm(this.t("You will loose unsaved changes, continue anyway ?")))return;let t=this.layout.element;this.setTheme(e);for(let i in this.layouts)if(this.layouts[i].element===t)return void this.setLayout({layoutId:this.layouts[i].id});this.setLayout({layoutId:this.layouts[0].id})},...(0,a.OI)(["setTheme","setAllLayouts","setShowFieldHandles"]),...(0,a.nv)(["setLayout","setViewModeByHandle"])}},f=i(3744);const b=(0,f.Z)(v,[["render",y]]);var g=b;const w={class:"themes-displays"},V={key:0,class:"spinner-wrapper"},M=(0,l.createElementVNode)("div",{class:"spinner"},null,-1),E=[M],k={key:1,class:"fullwidth display-table"},C={class:"line head"},N=(0,l.createElementVNode)("div",{class:"handle col"},null,-1),D={class:"title col"},B={key:0,class:"handle col"},S={class:"type col"},x={class:"label col"},H=["title"],I={class:"visibility col"},L=["title"],T={class:"displayer col"},G=(0,l.createElementVNode)("div",{class:"options col"},null,-1),O={class:"body"},U={key:2},_={key:3};function F(e,t,i,a,o,s){const n=(0,l.resolveComponent)("display-item"),d=(0,l.resolveComponent)("draggable"),r=(0,l.resolveComponent)("group-modal");return(0,l.openBlock)(),(0,l.createElementBlock)("div",w,[s.isLoading||e.isSaving?((0,l.openBlock)(),(0,l.createElementBlock)("div",V,E)):(0,l.createCommentVNode)("",!0),s.rootDisplays.length?((0,l.openBlock)(),(0,l.createElementBlock)("div",k,[(0,l.createElementVNode)("div",C,[N,(0,l.createElementVNode)("div",D,(0,l.toDisplayString)(e.t("Title",{},"app")),1),e.showFieldHandles?((0,l.openBlock)(),(0,l.createElementBlock)("div",B,(0,l.toDisplayString)(e.t("Handle",{},"app")),1)):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",S,(0,l.toDisplayString)(e.t("Type")),1),(0,l.createElementVNode)("div",x,[(0,l.createElementVNode)("a",{href:"#",title:e.allLabelsVisible?e.t("Make all hidden"):e.t("Make all visible"),onClick:t[0]||(t[0]=(0,l.withModifiers)((t=>e.setLabelsVisibility(!e.allLabelsVisible)),["prevent"]))},(0,l.toDisplayString)(e.t("Label",{},"app")),9,H)]),(0,l.createElementVNode)("div",I,[(0,l.createElementVNode)("a",{href:"#",title:e.allItemsVisible?e.t("Make all hidden"):e.t("Make all visible"),onClick:t[1]||(t[1]=(0,l.withModifiers)((t=>e.setItemsVisibility(!e.allItemsVisible)),["prevent"]))},(0,l.toDisplayString)(e.t("Visibility")),9,L)]),(0,l.createElementVNode)("div",T,(0,l.toDisplayString)(e.t("Displayer")),1),G]),(0,l.createElementVNode)("div",O,[(0,l.createVNode)(d,{"item-key":"uid",list:s.rootDisplays,group:"displays",handle:".move",swapThreshold:"0.65",onChange:s.onDragChange},{item:(0,l.withCtx)((({element:e})=>[(0,l.createVNode)(n,{display:e,"indentation-level":0},null,8,["display"])])),_:1},8,["list","onChange"])])])):(0,l.createCommentVNode)("",!0),e.layouts.length>0&&0==s.rootDisplays.length&&!s.isLoading?((0,l.openBlock)(),(0,l.createElementBlock)("p",U,(0,l.toDisplayString)(e.t("There are no displays for this view mode")),1)):(0,l.createCommentVNode)("",!0),0!=e.layouts.length||s.isLoading?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("p",_,(0,l.toDisplayString)(e.t("No layouts available, you should reinstall the themes data in the settings")),1)),(0,l.createVNode)(r,{onCloseModal:t[2]||(t[2]=t=>e.setShowGroupModal({show:!1}))})])}var j={data:function(){return{allItemsVisible:!0,allLabelsVisible:!0}},computed:{isLoading:function(){return this.isFetching||this.isSaving},rootDisplays:function(){return this.viewMode?(0,o.sortBy)(this.viewMode.displays,"order"):[]},...(0,a.rn)(["viewMode","isSaving","isFetching","viewMode","showGroupModal","viewModes","layouts","showFieldHandles"])},watch:{viewMode:{deep:!0,handler(){this.allItemsVisible=!0,this.allLabelsVisible=!0;for(let e of this.rootDisplays)if(e.item.hidden){this.allItemsVisible=!1;break}for(let e of this.rootDisplays)if(e.item.labelHidden){this.allLabelsVisible=!1;break}}}},methods:{onDragChange:function(e){e.removed?this.removeDisplay(e.removed.element):e.added&&(e.added.element.group_id=null,this.addDisplay(e.added.element)),this.rebuildOrders(e)},rebuildOrders:function(e){let t,i;e.added?(t=e.added.newIndex,i=e.added.element):e.moved&&(t=e.moved.newIndex,i=e.moved.element);let l=0;for(let a in this.rootDisplays){let e=this.rootDisplays[a];i&&l==t&&l++,i&&e.id==i.id||(e.order=l,this.updateDisplay({uid:e.uid,data:{order:l}}),l++)}i&&(i.order=t,this.updateDisplay({uid:i.uid,data:{order:t}}))},...(0,a.OI)(["updateDisplay","setShowGroupModal","addDisplay","removeDisplay","setItemsVisibility","setLabelsVisibility"])}};i(6502);const Z=(0,f.Z)(j,[["render",F]]);var q=Z;const z={key:0,id:"action-buttons",class:"flex"},A=["disabled"],P=["disabled"];function R(e,t,i,a,o,s){return e.layouts.length?((0,l.openBlock)(),(0,l.createElementBlock)("div",z,[(0,l.createElementVNode)("button",{href:"#",class:"btn",disabled:!s.canSave,onClick:t[0]||(t[0]=(0,l.withModifiers)((t=>e.setShowGroupModal({show:!0})),["prevent"]))},(0,l.toDisplayString)(e.t("New group")),9,A),(0,l.createElementVNode)("button",{href:"#",class:"btn submit",disabled:!s.canSave,onClick:t[1]||(t[1]=(0,l.withModifiers)(((...t)=>e.save&&e.save(...t)),["prevent"]))},(0,l.toDisplayString)(e.t("Save",{},"app")),9,P)])):(0,l.createCommentVNode)("",!0)}var Y={computed:{canSave:function(){return!this.isSaving&&!this.isFetching},...(0,a.rn)(["isSaving","isFetching","layouts"])},methods:{...(0,a.OI)(["setShowGroupModal"]),...(0,a.nv)(["save"])}};i(2021),i(4664);const X=(0,f.Z)(Y,[["render",R],["__scopeId","data-v-51f39d2d"]]);var J=X;const K=e=>((0,l.pushScopeId)("data-v-7a9afd8c"),e=e(),(0,l.popScopeId)(),e),Q={class:"pane-header"},W={id:"tabs",class:"pane-tabs"},ee={class:"heading"},te=["title"],ie=K((()=>(0,l.createElementVNode)("span",{class:"icon add"},null,-1))),le=[ie],ae=["data-viewmode"],oe={key:0,class:"error","data-icon":"alert","aria-label":"Error"},se={key:1},ne=["onClick"],de=["title","onClick"],re=["onClick"],ce=K((()=>(0,l.createElementVNode)("button",{id:"overflow-tab-btn",type:"button","data-icon":"ellipsis",class:"btn menubtn hidden"},null,-1))),pe=K((()=>(0,l.createElementVNode)("div",{id:"overflow-tab-menu",class:"menu"},[(0,l.createElementVNode)("ul",{role:"listbox"})],-1)));function he(e,t,i,a,o,s){const n=(0,l.resolveComponent)("view-mode-modal");return(0,l.openBlock)(),(0,l.createElementBlock)("div",Q,[(0,l.createElementVNode)("nav",W,[(0,l.createElementVNode)("div",ee,[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(e.t("View modes")),1),(0,l.createElementVNode)("a",{href:"#",class:"add-viewmode",title:e.t("New View Mode"),onClick:t[0]||(t[0]=(0,l.withModifiers)(((...e)=>s.addViewMode&&s.addViewMode(...e)),["prevent"]))},le,8,te)]),(0,l.createElementVNode)("ul",null,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.viewModes,((i,a)=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:a},[(0,l.createElementVNode)("a",{class:(0,l.normalizeClass)({sel:e.viewMode.handle===i.handle}),href:"#","data-viewmode":i.id,onClick:t[1]||(t[1]=(0,l.withModifiers)((()=>{}),["prevent"]))},[i.hasErrors?((0,l.openBlock)(),(0,l.createElementBlock)("span",oe)):(0,l.createCommentVNode)("",!0),i.hasErrors?((0,l.openBlock)(),(0,l.createElementBlock)("span",se,"Â ")):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("span",{onClick:(0,l.withModifiers)((e=>s.setViewMode2(i)),["prevent"])},(0,l.toDisplayString)(i.name),9,ne),e.viewMode.handle===i.handle?((0,l.openBlock)(),(0,l.createElementBlock)("span",{key:2,class:"icon edit",title:e.t("Edit view mode"),onClick:(0,l.withModifiers)((e=>s.editViewMode(i)),["prevent"])},null,8,de)):(0,l.createCommentVNode)("",!0),"default"!=i.handle&&e.viewMode.handle===i.handle?((0,l.openBlock)(),(0,l.createElementBlock)("span",{key:3,class:"icon delete",onClick:(0,l.withModifiers)((e=>s.confirmAndDeleteViewMode(i)),["prevent"])},null,8,re)):(0,l.createCommentVNode)("",!0)],10,ae)])))),128))]),ce,pe,(0,l.createVNode)(n,{"show-modal":o.showModal,editedViewMode:o.editedViewMode,onCloseModal:s.onCloseModal},null,8,["show-modal","editedViewMode","onCloseModal"])])])}var ue={data(){return{showModal:!1,editedViewMode:null,tabsInited:!1,overflowTabBtn:null}},computed:{...(0,a.rn)(["viewModes","viewMode"])},updated(){this.tabsInited||(this.overflowTabBtn=$("#overflow-tab-btn"),this.overflowTabBtn.data("menubtn")||new Garnish.MenuBtn(this.overflowTabBtn),this.tabsInited=!0,$(window).resize((()=>{this.initTabs()}))),this.$nextTick((()=>{this.initTabs()}))},methods:{onCloseModal:function(){this.edit=null,this.showModal=!1},setViewMode2:function(e){this.setViewMode({viewMode:e})},selectViewMode(e){let t=this.viewModes.filter((t=>t.id==e))[0];this.setViewMode({viewMode:t}),this.overflowTabBtn.data("menubtn").hideMenu()},addViewMode:function(){this.editedViewMode=null,this.showModal=!0},editViewMode:function(e){this.editedViewMode=e,this.showModal=!0},confirmAndDeleteViewMode:function(e){confirm(this.t("Do you really want to delete this view mode ?"))&&this.deleteViewMode(e)},initTabs(){let e=$(this.$el).find("ul").width(),t=$(this.$el).find("li a:not(.sel)"),i=!1,l=this.overflowTabBtn.data("menubtn").menu.$container.find("> ul"),a=[],o=$(this.$el).find("li a.sel");$(this.$el).find("li").removeClass("hidden");let s=o.parent().width(),n=this;$.each(t,((t,l)=>{let o=$(l).parent();if(s+=o.width(),s>e){let e=o.clone();e.find("a").click((function(e){e.preventDefault(),n.selectViewMode($(this).data("viewmode")),n.$nextTick((()=>{n.initTabs()}))})),a.push(e),o.addClass("hidden"),i=!0}})),i?(l.html(a),this.overflowTabBtn.removeClass("hidden")):this.overflowTabBtn.addClass("hidden")},...(0,a.nv)(["deleteViewMode","setViewMode"])}};i(9617);const me=(0,f.Z)(ue,[["render",he],["__scopeId","data-v-7a9afd8c"]]);var ye=me;const ve={id:"notification-nav"},fe={class:"heading"},be=["href","onClick"],ge={key:0},we=["href","onClick"];function Ve(e,t,i,a,o,s){return(0,l.openBlock)(),(0,l.createElementBlock)("nav",ve,[(0,l.createElementVNode)("ul",null,[(0,l.createElementVNode)("li",fe,[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(e.t("Layouts")),1)]),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(s.rootLayouts,(t=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:t.id},[(0,l.createElementVNode)("a",{href:s.getUrl(t),class:(0,l.normalizeClass)({sel:e.layout.id===t.id}),onClick:(0,l.withModifiers)((e=>s.confirmAndChangeLayout(t.id)),["prevent"])},(0,l.toDisplayString)(t.description),11,be),s.getChildren(t)?((0,l.openBlock)(),(0,l.createElementBlock)("ul",ge,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(s.getChildren(t),(t=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:t.id},[(0,l.createElementVNode)("a",{href:s.getUrl(t),class:(0,l.normalizeClass)({sel:e.layout.id===t.id}),onClick:(0,l.withModifiers)((e=>s.confirmAndChangeLayout(t.id)),["prevent"])},(0,l.toDisplayString)(t.description),11,we)])))),128))])):(0,l.createCommentVNode)("",!0)])))),128))])])}var Me={computed:{rootLayouts(){return this.layouts.filter((e=>null==e.parent_id))},...(0,a.rn)(["layout","layouts","theme"])},methods:{getChildren(e){return this.layouts.filter((t=>t.parent_id==e.id))},getUrl(e){return Craft.getCpUrl("themes/display/"+this.theme+"/"+e.id)},confirmAndChangeLayout:function(e){confirm(this.t("You will loose unsaved changes, continue anyway ?"))&&this.setLayout({layoutId:e})},...(0,a.nv)(["setLayout"])}};i(6424);const Ee=(0,f.Z)(Me,[["render",Ve],["__scopeId","data-v-b64f69bc"]]);var ke=Ee;function Ce(e,t,i,a,o,s){return(0,l.openBlock)(),(0,l.createBlock)((0,l.resolveDynamicComponent)(s.type),{display:i.display,item:i.display.item,"indentation-level":i.indentationLevel,onUpdateItem:t[0]||(t[0]=t=>e.updateItem({displayUid:i.display.uid,data:t}))},null,8,["display","item","indentation-level"])}var Ne={props:{display:{type:Object,default:null},indentationLevel:{type:Number,default:null}},computed:{type:function(){return"group"==this.display.type?"group":this.fieldComponent(this.display.item.type)}},methods:{...(0,a.OI)(["updateItem"])}};const De=(0,f.Z)(Ne,[["render",Ce]]);var Be=De;const Se={class:"header"},xe={key:0,class:"description"},He={class:"body"},Ie={class:"content"},Le={class:"footer"},Te={class:"buttons right"};function Ge(e,t,i,a,o,s){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{ref:"modal",class:(0,l.normalizeClass)("modal elementselectormodal themes-modal-options displayer-"+i.displayer.handle),style:{display:"none"}},[(0,l.createElementVNode)("div",Se,[(0,l.createElementVNode)("h3",null,(0,l.toDisplayString)(e.t("Edit displayer options")),1),i.displayer.description?((0,l.openBlock)(),(0,l.createElementBlock)("i",xe,(0,l.toDisplayString)(i.displayer.description),1)):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",He,[(0,l.createElementVNode)("div",Ie,[(0,l.createElementVNode)("form",{class:"main",onSubmit:t[0]||(t[0]=(0,l.withModifiers)(((...e)=>s.save&&s.save(...e)),["prevent"]))},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(i.displayer.options.definitions,((e,t)=>((0,l.openBlock)(),(0,l.createBlock)((0,l.resolveDynamicComponent)(s.formFieldComponent(e.field)),{key:t,name:t,definition:e,value:o.options[t]??null,errors:o.errors[t]??[],onChange:e=>s.updateOption(t,e)},null,8,["name","definition","value","errors","onChange"])))),128))],32)])]),(0,l.createElementVNode)("div",Le,[(0,l.createElementVNode)("div",Te,[i.displayerHasChanged?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("button",{key:0,type:"button",class:"btn",onClick:t[1]||(t[1]=(...e)=>s.closeModal&&s.closeModal(...e))},(0,l.toDisplayString)(e.t("Close",{},"app")),1)),(0,l.createElementVNode)("button",{type:"button",class:"btn submit",onClick:t[2]||(t[2]=(...e)=>s.save&&s.save(...e))},(0,l.toDisplayString)(e.t("Save",{},"app")),1)])])],2)}var $e={props:{displayer:{type:Object,default:null},item:{type:Object,default:null},displayerHasChanged:Boolean},emits:["onSave","onHide"],data(){return{modal:null,options:{},errors:{}}},computed:{},created(){this.displayerHasChanged?this.options=(0,o.merge)({},this.displayer.options.defaultValues):this.options=(0,o.merge)({},this.item.options),this.errors=this.item.errors.displayer??{}},beforeUnmount(){this.modal.destroy()},mounted:function(){this.modal=new Garnish.Modal(this.$refs.modal,{hideOnEsc:!1,hideOnShadeClick:!1,onHide:()=>{this.$emit("onHide")}})},methods:{formFieldComponent(e){return"formfield-"+e},closeModal(){this.options={},this.errors={},this.modal.hide()},updateOption(e,t){this.options[e]=t},save(){let e={fieldId:this.item.id,displayer:this.displayer.handle,options:this.options};axios({method:"post",url:Craft.getCpUrl("themes/ajax/validate-field-options"),data:e,headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then((e=>{Object.keys(e.data.errors).length>0?this.errors=e.data.errors:(this.$emit("onSave",this.options),this.closeModal())})).catch((e=>{this.handleError(e)}))}}};const Oe=(0,f.Z)($e,[["render",Ge]]);var Ue=Oe;const _e={ref:"modal",class:"modal elementselectormodal modal-viewmode",style:{display:"none"}},Fe={class:"header"},je={class:"body"},Ze={class:"content"},qe={class:"field width-100"},ze={class:"heading"},Ae={class:"required",for:"name"},Pe={class:"input ltr"},Re={key:0,class:"errors"},Ye={class:"field width-100"},Xe={class:"heading"},Je={class:"required",for:"handle"},Ke={class:"input ltr"},Qe=["disabled"],We={key:0,class:"errors"},et={class:"footer"},tt={class:"buttons right"};function it(e,t,i,a,o,s){return(0,l.openBlock)(),(0,l.createElementBlock)("div",_e,[(0,l.createElementVNode)("div",Fe,[(0,l.createElementVNode)("h3",null,(0,l.toDisplayString)(i.editedViewMode?e.t("Edit view mode"):e.t("Add view mode")),1)]),(0,l.createElementVNode)("div",je,[(0,l.createElementVNode)("div",Ze,[(0,l.createElementVNode)("form",{onSubmit:t[2]||(t[2]=(0,l.withModifiers)(((...e)=>s.save&&s.save(...e)),["prevent"]))},[(0,l.createElementVNode)("div",qe,[(0,l.createElementVNode)("div",ze,[(0,l.createElementVNode)("label",Ae,(0,l.toDisplayString)(e.t("Name",{},"app")),1)]),(0,l.createElementVNode)("div",Pe,[(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),class:(0,l.normalizeClass)({text:!0,fullwidth:!0,error:o.nameError}),type:"text",maxlength:"255",required:""},null,2),[[l.vModelText,o.name]])]),o.nameError?((0,l.openBlock)(),(0,l.createElementBlock)("ul",Re,[(0,l.createElementVNode)("li",null,(0,l.toDisplayString)(o.nameError),1)])):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",Ye,[(0,l.createElementVNode)("div",Xe,[(0,l.createElementVNode)("label",Je,(0,l.toDisplayString)(e.t("Handle",{},"app")),1)]),(0,l.createElementVNode)("div",Ke,[(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"handle","onUpdate:modelValue":t[1]||(t[1]=e=>o.handle=e),type:"text",class:(0,l.normalizeClass)({text:!0,fullwidth:!0,error:o.handleError}),disabled:"edit"==s.mode&&"default"==i.editedViewMode.handle,maxlength:"255",required:""},null,10,Qe),[[l.vModelText,o.handle]])]),o.handleError?((0,l.openBlock)(),(0,l.createElementBlock)("ul",We,[(0,l.createElementVNode)("li",null,(0,l.toDisplayString)(o.handleError),1)])):(0,l.createCommentVNode)("",!0)])],32)])]),(0,l.createElementVNode)("div",et,[(0,l.createElementVNode)("div",tt,[(0,l.createElementVNode)("button",{type:"button",class:"btn",onClick:t[3]||(t[3]=(...e)=>s.closeModal&&s.closeModal(...e))},(0,l.toDisplayString)(e.t("Close",{},"app")),1),(0,l.createElementVNode)("button",{type:"button",class:"btn submit",onClick:t[4]||(t[4]=(0,l.withModifiers)(((...e)=>s.save&&s.save(...e)),["prevent"]))},(0,l.toDisplayString)(e.t("Save",{},"app")),1)])])],512)}var lt=i(2045);const at={install(e){e.config.globalProperties.t=(e,t,i="themes")=>window.Craft.t(i,e,t)}},ot={install(e){e.config.globalProperties.handleError=e=>{let t=e;e.response&&(e.response.data.message?t=e.response.data.message:e.response.data.error&&(t=e.response.data.error)),Craft.cp.displayError(t)}}},st={install(e){e.config.globalProperties.cloneDisplay=t=>{let i,l=(0,o.merge)({},t);return i="group"==t.type?e.config.globalProperties.cloneGroup(t.item):e.config.globalProperties.cloneField(t.item),l.item=i,l.id=null,l.uid=(0,lt.Z)(),l},e.config.globalProperties.cloneField=t=>{let i;return i="undefined"!=typeof window.CraftThemes.fieldComponents[t.type]?window.CraftThemes.fieldComponents[t.type].clone(t,e):(0,o.merge)({},t),i.id=null,i.uid=(0,lt.Z)(),i},e.config.globalProperties.cloneGroup=t=>{let i=(0,o.merge)({},t),l=[];for(let a in t.displays)l.push(e.config.globalProperties.cloneDisplay(t.displays[a]));return i.displays=l,i.id=null,i.uid=(0,lt.Z)(),i}}},nt={install(e){e.config.globalProperties.fieldComponent=e=>"undefined"!=typeof window.CraftThemes.fieldComponents[e]?"field-"+e:"field"}},dt=Craft.HandleGenerator.extend({callback:null,updateTarget:function(){if(this.$target.is(":visible")){var e=this.$source.val();if("undefined"!==typeof e){var t=this.generateTargetValue(e);this.$target.val(t),this.$target.trigger("change"),this.$target.trigger("input"),this.$target.is(":focus")&&Craft.selectFullValue(this.$target),this.callback&&this.callback(t)}}}});Craft.BaseElementSelectInput.extend({theme:null,actionUrl:null,createElementCallback:null,initialIds:[],errors:{},init(e){this.base(e),this.initialIds.length&&Craft.postActionRequest(this.actionUrl,{theme:this.theme,id:this.initialIds},(e=>{let t=[];for(let i of e)t.push(this.createElementCallback(i));this.selectElements2(t),this.updateErrors()}))},setSettings:function(){this.base.apply(this,arguments),this.theme=arguments[0].theme,this.actionUrl=arguments[0].actionUrl,this.createElementCallback=arguments[0].createElementCallback,this.initialIds=arguments[0].initialIds,this.errors=arguments[0].errors},createNewElement:function(e){let t=this.base(e),i=$('<div class="row" style="margin-bottom:5px;display:flex;justify-content:space-between;align-items:center">');return i.append(t),e.viewModes?this.appendViewModes(i,e.viewModes,e.viewMode):this.fetchViewModes(e.id).done((t=>{this.appendViewModes(i,t[0].viewModes,e.viewMode??t[0].viewModes[0].uid),this.trigger("viewModesChanged")})),i},updateErrors:function(){this.$container.find(".element-error").remove();for(let e in this.errors){let t=this.$elements.find(".element[data-id="+e+"]").parent(),i=$('<div class="error element-error">'+this.errors[e]+"</div>");t.find(".select-wrapper").append(i)}},selectElements2:function(e){for(let t=0;t<e.length;t++){let i=e[t],l=this.createNewElement(i);this.appendElement(l),this.addElements(l),i.$element=l}this.onSelectElements(e)},fetchViewModes:function(e){let t={theme:this.theme,id:e};return Craft.postActionRequest(this.actionUrl,t)},appendViewModes:function(e,t,i){let l=$('<div class="select-wrapper"><div class="select"><select><option value="">'+Craft.t("themes","Select a view mode")+"</select></select></div></div>");t.forEach((e=>{l.find("select").append('<option value="'+e.uid+'"'+(e.uid==i?" selected":"")+">"+e.name+"</options>")})),l.find("select").on("change",(()=>{this.trigger("viewModesChanged")})),e.append(l)},getSelectedElementIds:function(){for(var e=[],t=0;t<this.$elements.length;t++)e.push(this.$elements.eq(t).find(".element").data("id"));return e},getSelectedElementData:function(){let e=[];for(var t=0;t<this.$elements.length;t++){let i=this.$elements.eq(t);e.push({id:i.find(".element").data("id"),viewMode:i.find("select").val()})}return e},removeElements:function(e){if(this.settings.selectable&&this.elementSelect.removeItems(e),this.modal){for(var t=[],i=0;i<e.length;i++){var l=e.find(".element").eq(i).data("id");l&&t.push(l)}t.length&&this.modal.elementIndex.enableElementsById(t)}e.children("input").prop("disabled",!0),this.$elements=this.$elements.not(e),this.updateAddElementsBtn(),this.onRemoveElements()},removeElement:function(e){this.removeElements(e.parent()),this.animateElementAway(e.parent(),(()=>{e.parent().remove()}))},initElementSort:function(){this.base(),this.elementSort.settings.ignoreHandleSelector=".delete, .select",this.elementSort.settings.onSortChange=()=>{this.trigger("orderChanged")}}});var rt={props:{showModal:Boolean,editedViewMode:{type:Object,default:null}},emits:["closeModal"],data(){return{popup:null,name:"",handle:"",nameError:"",handleError:"",handleGenerator:null}},computed:{mode:function(){return null===this.editedViewMode?"add":"edit"},hasError:function(){return this.handleError||this.nameError},...(0,a.rn)(["viewModes","layout"])},watch:{showModal:function(){this.showModal?(this.updateGenerator(),"edit"==this.mode&&(this.name=this.editedViewMode.name,this.handle=this.editedViewMode.handle),this.popup.show()):this.popup.hide()}},mounted(){this.createModal()},beforeUnmount(){this.popup.destroy()},methods:{createModal:function(){this.popup=new Garnish.Modal(this.$refs.modal,{hideOnEsc:!1,hideOnShadeClick:!1,autoShow:!1}),this.handleGenerator=new dt(".modal-viewmode #name",".modal-viewmode #handle"),this.handleGenerator.callback=e=>{this.handle=e},this.updateGenerator()},updateGenerator:function(){"add"==this.mode?this.handleGenerator.startListening():this.handleGenerator.stopListening()},removeErrors(){this.nameError="",this.handleError=""},closeModal(){this.$emit("closeModal"),this.name="",this.handle="",this.removeErrors()},validateModal:function(){if(this.removeErrors(),this.name=this.name.trim(),this.handle=this.handle.trim(),this.name||(this.nameError=this.t("Name is required")),null===this.editedViewMode){this.handle||(this.handleError=this.t("Handle is required"));for(let e in this.viewModes)this.viewModes[e].handle==this.handle&&(this.handleError=this.t("This handle is already defined"))}},save(){this.validateModal(),this.hasError||("edit"==this.mode?this.editViewMode({originalHandle:this.editedViewMode.handle,name:this.name,handle:this.handle}):this.addViewMode({name:this.name,handle:this.handle}),this.closeModal())},...(0,a.nv)(["addViewMode","editViewMode"])}};i(4802);const ct=(0,f.Z)(rt,[["render",it],["__scopeId","data-v-a04944e2"]]);var pt=ct;const ht={ref:"modal",class:"modal elementselectormodal modal-group",style:{display:"none"}},ut={class:"header"},mt={class:"body"},yt={class:"content"},vt={class:"field"},ft={class:"heading"},bt={class:"required",for:"name"},gt={class:"input ltr"},wt={key:0,class:"errors"},Vt={class:"field"},Mt={class:"heading"},Et={class:"required",for:"handle"},kt={class:"input ltr"},Ct={key:0,class:"errors"},Nt={class:"footer"},Dt={class:"buttons right"};function Bt(e,t,i,a,o,s){return(0,l.openBlock)(),(0,l.createElementBlock)("div",ht,[(0,l.createElementVNode)("div",ut,[(0,l.createElementVNode)("h3",null,(0,l.toDisplayString)(e.editedGroupUid?e.t("Edit group"):e.t("Add group")),1)]),(0,l.createElementVNode)("div",mt,[(0,l.createElementVNode)("div",yt,[(0,l.createElementVNode)("form",{onSubmit:t[2]||(t[2]=(0,l.withModifiers)(((...e)=>s.save&&s.save(...e)),["prevent"]))},[(0,l.createElementVNode)("div",vt,[(0,l.createElementVNode)("div",ft,[(0,l.createElementVNode)("label",bt,(0,l.toDisplayString)(e.t("Name",{},"app")),1)]),(0,l.createElementVNode)("div",gt,[(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),type:"text",class:(0,l.normalizeClass)({text:!0,fullwidth:!0,error:o.nameError}),maxlength:"255",required:""},null,2),[[l.vModelText,o.name]])]),o.nameError?((0,l.openBlock)(),(0,l.createElementBlock)("ul",wt,[(0,l.createElementVNode)("li",null,(0,l.toDisplayString)(o.nameError),1)])):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",Vt,[(0,l.createElementVNode)("div",Mt,[(0,l.createElementVNode)("label",Et,(0,l.toDisplayString)(e.t("Handle",{},"app")),1)]),(0,l.createElementVNode)("div",kt,[(0,l.withDirectives)((0,l.createElementVNode)("input",{id:"handle","onUpdate:modelValue":t[1]||(t[1]=e=>o.handle=e),type:"text",class:(0,l.normalizeClass)({text:!0,fullwidth:!0,error:o.handleError}),maxlength:"255",required:""},null,2),[[l.vModelText,o.handle]])]),o.handleError?((0,l.openBlock)(),(0,l.createElementBlock)("ul",Ct,[(0,l.createElementVNode)("li",null,(0,l.toDisplayString)(o.handleError),1)])):(0,l.createCommentVNode)("",!0)])],32)])]),(0,l.createElementVNode)("div",Nt,[(0,l.createElementVNode)("div",Dt,[(0,l.createElementVNode)("button",{type:"button",class:"btn",onClick:t[3]||(t[3]=(...e)=>s.closeModal&&s.closeModal(...e))},(0,l.toDisplayString)(e.t("Close",{},"app")),1),(0,l.createElementVNode)("button",{type:"button",class:"btn submit",onClick:t[4]||(t[4]=(...e)=>s.save&&s.save(...e))},(0,l.toDisplayString)(e.t("Save",{},"app")),1)])])],512)}var St={emits:["closeModal"],data(){return{modal:null,name:"",handle:"",nameError:!1,handleError:!1,handleGenerator:null}},computed:{editedGroup:function(){for(let e in this.groups)if(this.groups[e].uid==this.editedGroupUid)return this.groups[e];return null},displays:function(){return this.viewMode.displays},groups:function(){return this.displays.filter((e=>"group"==e.type))},hasError:function(){return this.handleError||this.nameError},maxOrder:function(){return this.displays[this.displays.length-1].order??0},...(0,a.rn)(["layout","showGroupModal","editedGroupUid","viewMode"])},watch:{showGroupModal:function(){this.showGroupModal?this.modal.show():this.modal.hide(),this.updategenerator(),this.editedGroupUid&&(this.name=this.editedGroup.item.name,this.handle=this.editedGroup.item.handle)}},mounted(){this.createModal()},beforeUnmount(){this.modal.destroy()},methods:{createModal:function(){this.modal=new Garnish.Modal(this.$refs.modal,{hideOnEsc:!1,hideOnShadeClick:!1,autoShow:!1}),this.handleGenerator=new dt(".modal-group #name",".modal-group #handle"),this.handleGenerator.callback=e=>{this.handle=e},this.updategenerator()},updategenerator:function(){null===this.editedGroupUid?this.handleGenerator.startListening():this.handleGenerator.stopListening()},removeErrors(){this.nameError=!1,this.handleError=!1},closeModal(){this.$emit("closeModal"),this.name="",this.handle="",this.removeErrors()},validateModal:function(){this.removeErrors(),this.name.trim()||(this.nameError=this.t("Name is required")),this.handle.trim()||(this.handleError=this.t("Handle is required"));for(let e in this.displays){if(this.displays[e].uid!=this.editedGroupUid&&this.displays[e].item.handle==this.handle.trim())return void(this.handleError=this.t("This handle is already defined"));if("group"==this.displays[e].type)for(let t in this.displays[e].item.displays)if(this.displays[e].item.displays[t].item.handle==this.handle.trim())return void(this.handleError=this.t("This handle is already defined"))}},save(){this.validateModal(),this.hasError||(null!==this.editedGroupUid?this.updateItem({displayUid:this.editedGroup.uid,data:{name:this.name,handle:this.handle}}):this.addDisplay({id:null,type:"group",uid:(0,lt.Z)(),order:this.maxOrder+1,item:{id:null,uid:(0,lt.Z)(),name:this.name,handle:this.handle,visuallyHidden:!1,hidden:!1,labelHidden:!1,labelVisuallyHidden:!1,displays:[]}}),this.closeModal())},...(0,a.OI)(["updateItem","addDisplay"])}};i(2525);const xt=(0,f.Z)(St,[["render",Bt],["__scopeId","data-v-57b19d03"]]);var Ht=xt;const It={class:"move col"},Lt=(0,l.createElementVNode)("div",{class:"indented"},null,-1),Tt={key:0,class:"move icon"},Gt={class:"title col"},$t={class:"name"},Ot={key:0,class:"error","data-icon":"alert","aria-label":"Error"},Ut=["value","size"],_t=(0,l.createElementVNode)("span",{"data-icon":"clipboard","aria-hidden":"true"},null,-1),Ft={class:"type col code"},jt={class:"label col"},Zt={key:0,class:"select"},qt=["selected"],zt=["selected"],At=["selected"],Pt={class:"visibility col"},Rt={class:"select"},Yt=["selected"],Xt=["selected"],Jt=["selected"],Kt={class:"displayer col"},Qt={key:0,class:"select"},Wt={key:0},ei=["selected","value"],ti={key:1},ii={class:"options col"};function li(e,t,i,a,o,s){const n=(0,l.resolveComponent)("options-modal");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:(0,l.normalizeClass)(s.containerClasses)},[(0,l.createElementVNode)("div",It,[Lt,i.moveable?((0,l.openBlock)(),(0,l.createElementBlock)("div",Tt)):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",Gt,[(0,l.createElementVNode)("span",$t,[(0,l.createTextVNode)((0,l.toDisplayString)(i.item.name)+" ",1),s.hasErrors?((0,l.openBlock)(),(0,l.createElementBlock)("span",Ot)):(0,l.createCommentVNode)("",!0)])]),e.showFieldHandles&&s.fullHandle?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,class:"code small light copytextbtn",title:"Copy to clipboard",role:"button",onClick:t[0]||(t[0]=(...e)=>s.copyValue&&s.copyValue(...e))},[(0,l.createElementVNode)("input",{type:"text",value:s.fullHandle,readonly:"",size:s.fullHandle.length},null,8,Ut),_t])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",Ft,(0,l.toDisplayString)(i.item.displayName),1),(0,l.createElementVNode)("div",jt,[i.hasLabel?((0,l.openBlock)(),(0,l.createElementBlock)("div",Zt,[(0,l.createElementVNode)("select",{onChange:t[1]||(t[1]=(...e)=>s.updateLabelVisibility&&s.updateLabelVisibility(...e))},[(0,l.createElementVNode)("option",{value:"hidden",selected:i.item.labelHidden},(0,l.toDisplayString)(e.t("Hidden")),9,qt),(0,l.createElementVNode)("option",{value:"visuallyHidden",selected:i.item.labelVisuallyHidden},(0,l.toDisplayString)(e.t("Visually hidden")),9,zt),(0,l.createElementVNode)("option",{value:"visible",selected:s.labelVisible},(0,l.toDisplayString)(e.t("Visible")),9,At)],32)])):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",Pt,[(0,l.renderSlot)(e.$slots,"visibility",{},(()=>[(0,l.createElementVNode)("div",Rt,[(0,l.createElementVNode)("select",{onChange:t[2]||(t[2]=(...e)=>s.updateVisibility&&s.updateVisibility(...e))},[(0,l.createElementVNode)("option",{value:"hidden",selected:i.item.hidden},(0,l.toDisplayString)(e.t("Hidden")),9,Yt),s.hasDisplayers?((0,l.openBlock)(),(0,l.createElementBlock)("option",{key:0,value:"visuallyHidden",selected:i.item.visuallyHidden},(0,l.toDisplayString)(e.t("Visually hidden")),9,Xt)):(0,l.createCommentVNode)("",!0),s.hasDisplayers?((0,l.openBlock)(),(0,l.createElementBlock)("option",{key:1,value:"visible",selected:s.visible},(0,l.toDisplayString)(e.t("Visible")),9,Jt)):(0,l.createCommentVNode)("",!0)],32)])]))]),(0,l.createElementVNode)("div",Kt,[s.hasDisplayers?((0,l.openBlock)(),(0,l.createElementBlock)("div",Qt,[(0,l.createElementVNode)("select",{onChange:t[3]||(t[3]=(...e)=>s.updateDisplayer&&s.updateDisplayer(...e))},[o.displayer?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("option",Wt,(0,l.toDisplayString)(e.t("Select")),1)),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(i.item.availableDisplayers,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("option",{key:e.handle,selected:o.displayer&&o.displayer.handle==e.handle,value:e.handle},(0,l.toDisplayString)(e.name),9,ei)))),128))],32)])):(0,l.createCommentVNode)("",!0),s.hasDisplayers?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("span",ti,(0,l.toDisplayString)(e.t("None available")),1))]),(0,l.createElementVNode)("div",ii,[o.displayer&&o.displayer.hasOptions?((0,l.openBlock)(),(0,l.createElementBlock)("a",{key:0,href:"#",onClick:t[4]||(t[4]=(0,l.withModifiers)((e=>o.showModal=!0),["prevent"]))},[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)({icon:!0,settings:!0,error:s.hasErrors})},null,2)])):(0,l.createCommentVNode)("",!0)]),o.showModal?((0,l.openBlock)(),(0,l.createBlock)(n,{key:1,displayerHasChanged:o.displayerHasChanged,displayer:o.displayer,item:i.item,onOnHide:s.closeModal,onOnSave:s.onSaveModal},null,8,["displayerHasChanged","displayer","item","onOnHide","onOnSave"])):(0,l.createCommentVNode)("",!0)],2)}var ai={props:{item:{type:Object,default:null},indentationLevel:{type:Number,default:null},display:{type:Object,default:()=>{}},moveable:{type:Boolean,default:!0},hasLabel:{type:Boolean,default:!0},classes:{type:String,default:()=>""}},emits:["updateItem"],data(){return{showModal:!1,displayerHasChanged:!1,displayer:!1}},computed:{containerClasses:function(){let e=this.classes+" line indented-"+this.indentationLevel;return this.isOpaque&&(e+=" opaque"),this.showFieldHandles&&(e+=" with-handles"),e},hasErrors:function(){return Array.isArray(this.item.errors)?this.item.errors.length>0:Object.keys(this.item.errors).length>0},visible:function(){return!this.item.visuallyHidden&&!this.item.hidden},labelVisible:function(){return!this.item.labelVisuallyHidden&&!this.item.labelHidden},hasDisplayers:function(){return this.item.availableDisplayers.length>0},displayerDefined:function(){return!!this.item.displayerHandle&&!1!==this.displayer},isOpaque:function(){return this.item.hidden||this.item.visuallyHidden||!this.displayerDefined||!this.hasDisplayers},fullHandle:function(){return this.displayer?this.displayer.handle:""},...(0,a.rn)(["showFieldHandles","itemsVisibility","labelsVisibility","switchLabelsVisibility","switchItemsVisibility"])},watch:{switchItemsVisibility:function(){this.$emit("updateItem",{hidden:!this.itemsVisibility})},switchLabelsVisibility:function(){this.$emit("updateItem",{labelHidden:!this.labelsVisibility})}},created(){this.displayer=this.getDisplayer(this.item.displayerHandle)},methods:{copyValue:function(e){let t=e.target;t.select(),document.execCommand("copy"),Craft.cp.displayNotice(this.t("Copied to clipboard.","app")),t.setSelectionRange(0,0)},closeModal:function(){this.showModal=!1,this.displayerHasChanged=!1},onSaveModal:function(e){this.$emit("updateItem",{options:e})},updateLabelVisibility:function(e){let t=e.originalTarget.value,i={labelHidden:!1,labelVisuallyHidden:!1};"hidden"==t?i.labelHidden=!0:"visuallyHidden"==t&&(i.labelVisuallyHidden=!0),this.$emit("updateItem",i)},updateVisibility:function(e){let t=e.originalTarget.value,i={hidden:!1,visuallyHidden:!1};"hidden"==t?i.hidden=!0:"visuallyHidden"==t&&(i.visuallyHidden=!0),this.$emit("updateItem",i)},getDisplayer:function(e){for(let t in this.item.availableDisplayers)if(this.item.availableDisplayers[t].handle==e)return this.item.availableDisplayers[t];return!1},updateDisplayer:function(e){this.$emit("updateItem",{displayerHandle:e.originalTarget.value,options:{}}),this.displayerHasChanged=!0,this.displayer=this.getDisplayer(e.originalTarget.value),this.displayer.hasOptions&&(this.showModal=!0)}}};const oi=(0,f.Z)(ai,[["render",li]]);var si=oi;const ni=e=>((0,l.pushScopeId)("data-v-6803d8d4"),e=e(),(0,l.popScopeId)(),e),di={class:"group line has-sub-fields"},ri=ni((()=>(0,l.createElementVNode)("div",{class:"move col"},[(0,l.createElementVNode)("div",{class:"move icon"})],-1))),ci={class:"title col"},pi={class:"name"},hi=["value","size"],ui=ni((()=>(0,l.createElementVNode)("span",{"data-icon":"clipboard","aria-hidden":"true"},null,-1))),mi={class:"type col code"},yi={class:"label col"},vi={class:"select"},fi=["selected"],bi=["selected"],gi=["selected"],wi={class:"visibility col"},Vi={class:"select"},Mi=["selected"],Ei=["selected"],ki=["selected"],Ci=ni((()=>(0,l.createElementVNode)("div",{class:"displayer col"},null,-1))),Ni={class:"options col"},Di=ni((()=>(0,l.createElementVNode)("span",{class:"icon settings"},null,-1))),Bi=[Di],Si=ni((()=>(0,l.createElementVNode)("span",{class:"icon delete"},null,-1))),xi=[Si],Hi={key:0,class:"no-displays"};function Ii(e,t,i,a,o,s){const n=(0,l.resolveComponent)("display-item"),d=(0,l.resolveComponent)("draggable");return(0,l.openBlock)(),(0,l.createElementBlock)("div",di,[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(s.classes)},[ri,(0,l.createElementVNode)("div",ci,[(0,l.createElementVNode)("span",pi,(0,l.toDisplayString)(i.item.name),1),e.showFieldHandles?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,class:"code small light copytextbtn",title:"Copy to clipboard",role:"button",onClick:t[0]||(t[0]=(...e)=>s.copyValue&&s.copyValue(...e))},[(0,l.createElementVNode)("input",{type:"text",value:"group-"+i.item.handle,readonly:"",size:("group-"+i.item.handle).length},null,8,hi),ui])):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",mi,(0,l.toDisplayString)(e.t("Group")),1),(0,l.createElementVNode)("div",yi,[(0,l.createElementVNode)("div",vi,[(0,l.createElementVNode)("select",{onChange:t[1]||(t[1]=(...e)=>s.updateLabelVisibility&&s.updateLabelVisibility(...e))},[(0,l.createElementVNode)("option",{value:"hidden",selected:i.item.labelHidden},(0,l.toDisplayString)(e.t("Hidden")),9,fi),(0,l.createElementVNode)("option",{value:"visuallyHidden",selected:i.item.labelVisuallyHidden},(0,l.toDisplayString)(e.t("Visually hidden")),9,bi),(0,l.createElementVNode)("option",{value:"visible",selected:s.labelVisible},(0,l.toDisplayString)(e.t("Visible")),9,gi)],32)])]),(0,l.createElementVNode)("div",wi,[(0,l.renderSlot)(e.$slots,"visibility",{},(()=>[(0,l.createElementVNode)("div",Vi,[(0,l.createElementVNode)("select",{onChange:t[2]||(t[2]=(...e)=>s.updateVisibility&&s.updateVisibility(...e))},[(0,l.createElementVNode)("option",{value:"hidden",selected:i.item.hidden},(0,l.toDisplayString)(e.t("Hidden")),9,Mi),(0,l.createElementVNode)("option",{value:"visuallyHidden",selected:i.item.visuallyHidden},(0,l.toDisplayString)(e.t("Visually hidden")),9,Ei),(0,l.createElementVNode)("option",{value:"visible",selected:s.visible},(0,l.toDisplayString)(e.t("Visible")),9,ki)],32)])]),!0)]),Ci,(0,l.createElementVNode)("div",Ni,[(0,l.createElementVNode)("a",{href:"#",onClick:t[3]||(t[3]=(0,l.withModifiers)(((...e)=>s.editGroup&&s.editGroup(...e)),["prevent"]))},Bi),(0,l.createElementVNode)("a",{href:"#",class:"delete",onClick:t[4]||(t[4]=(0,l.withModifiers)(((...e)=>s.deleteGroup&&s.deleteGroup(...e)),["prevent"]))},xi)])],2),s.groupDisplays.length?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("span",Hi,[(0,l.createElementVNode)("i",null,(0,l.toDisplayString)(e.t("This group is empty")),1)])),(0,l.createVNode)(d,{class:"sub-fields","item-key":"uid",list:s.groupDisplays,group:{name:"displays",put:s.canPut},swapThreshold:"1.2",handle:".move",onChange:s.onDragChange},{item:(0,l.withCtx)((({element:e})=>[(0,l.createVNode)(n,{display:e,"indentation-level":i.indentationLevel+1,onUpdateItem:t=>s.updateItem(t,e.uid)},null,8,["display","indentation-level","onUpdateItem"])])),_:1},8,["list","group","onChange"])])}var Li={props:{item:{type:Object,default:null},indentationLevel:{type:Number,default:0},display:{type:Object,default:function(){return{}}}},emits:["updateItem","delete"],computed:{classes:function(){return{line:!0,opaque:this.item.hidden||this.item.visuallyHidden}},visible:function(){return!this.item.visuallyHidden&&!this.item.hidden},labelVisible:function(){return!this.item.labelVisuallyHidden&&!this.item.labelHidden},groupDisplays:function(){return(0,o.sortBy)(this.item.displays,"order")},...(0,a.rn)(["showFieldHandles","labelsVisibility","itemsVisibility","viewMode","switchLabelsVisibility","switchItemsVisibility"])},watch:{switchItemsVisibility:function(){this.$emit("updateItem",{hidden:!this.itemsVisibility})},switchLabelsVisibility:function(){this.$emit("updateItem",{labelHidden:!this.labelsVisibility})}},methods:{copyValue:function(e){let t=e.target;t.select(),document.execCommand("copy"),Craft.cp.displayNotice(this.t("Copied to clipboard.","app")),t.setSelectionRange(0,0)},updateLabelVisibility:function(e){let t=e.originalTarget.value,i={labelHidden:!1,labelVisuallyHidden:!1};"hidden"==t?i.labelHidden=!0:"visuallyHidden"==t&&(i.labelHidden=!1,i.labelVisuallyHidden=!0),this.$emit("updateItem",i)},updateVisibility:function(e){let t=e.originalTarget.value,i={hidden:!1,visuallyHidden:!1};"hidden"==t?i.hidden=!0:"visuallyHidden"==t&&(i.hidden=!1,i.visuallyHidden=!0),this.$emit("updateItem",i)},canPut:function(e,t,i){return!$(i).hasClass("group")},editGroup:function(){this.setShowGroupModal({show:!0,editUid:this.display.uid})},deleteGroup:function(){if(!confirm(this.t("Are you sure you want to delete this group ?")))return;let e=this.viewMode.displays.length-1;for(let t of this.groupDisplays)t.group_id=null,t.order=e,e++,this.addDisplay(t);this.removeDisplay(this.display)},onDragChange:function(e){e.added?(e.added.element.group_id=null,this.addDisplayToGroup({display:e.added.element,groupUid:this.display.uid})):e.removed&&this.removeDisplayFromGroup({display:e.removed.element,groupUid:this.display.uid}),this.rebuildOrders(e)},updateItem:function(e,t){let i;for(let l in this.display.item.displays)if(i=this.display.item.displays[l],i.uid==t){i.item=e;break}},rebuildOrders:function(e){let t,i;e.added?(t=e.added.newIndex,i=e.added.element):e.moved&&(t=e.moved.newIndex,i=e.moved.element);let l=0;for(let a in this.groupDisplays){let e=this.groupDisplays[a];i&&l==t&&l++,i&&e.id==i.id||(e.order=l,l++)}i&&(i.order=t)},...(0,a.OI)(["setShowGroupModal","addDisplayToGroup","removeDisplayFromGroup","removeDisplay","addDisplay"]),...(0,a.nv)([])}};i(4872),i(4094);const Ti=(0,f.Z)(Li,[["render",Ii],["__scopeId","data-v-6803d8d4"]]);var Gi=Ti,$i=i(9980),Oi=i.n($i);const Ui=(0,l.createApp)({components:{Displays:q,DisplayContext:g,DisplayToolbar:J,DisplayTabs:ye,DisplayMenu:ke}}),_i=r(Ui);Ui.use(_i),Ui.use(at),Ui.use(ot),Ui.use(nt),Ui.use(st),Ui.component("field",si),Ui.component("view-mode-modal",pt),Ui.component("draggable",Oi()),Ui.component("group",Gi),Ui.component("options-modal",Ue),Ui.component("group-modal",Ht),Ui.component("display-item",Be);for(let $ in window.CraftThemes.formFieldComponents)Ui.component("formfield-"+$,window.CraftThemes.formFieldComponents[$]);for(let $ in window.CraftThemes.fieldComponents)Ui.component("field-"+$,window.CraftThemes.fieldComponents[$].component);Ui.mount("#main")},6424:function(e,t,i){var l=i(5225);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("753c385e",l,!0,{sourceMap:!1,shadowMode:!1})},9617:function(e,t,i){var l=i(4530);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("175a3a04",l,!0,{sourceMap:!1,shadowMode:!1})},2021:function(e,t,i){var l=i(5367);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("2d4b3d9c",l,!0,{sourceMap:!1,shadowMode:!1})},4664:function(e,t,i){var l=i(8476);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("04f99b70",l,!0,{sourceMap:!1,shadowMode:!1})},6502:function(e,t,i){var l=i(7249);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("c8378a2c",l,!0,{sourceMap:!1,shadowMode:!1})},4872:function(e,t,i){var l=i(3700);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("614b268e",l,!0,{sourceMap:!1,shadowMode:!1})},4094:function(e,t,i){var l=i(6482);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("5d78cda2",l,!0,{sourceMap:!1,shadowMode:!1})},2525:function(e,t,i){var l=i(5698);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("2ae01500",l,!0,{sourceMap:!1,shadowMode:!1})},4802:function(e,t,i){var l=i(5573);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=i(4402).Z;a("6c831abc",l,!0,{sourceMap:!1,shadowMode:!1})}},t={};function i(l){var a=t[l];if(void 0!==a)return a.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,function(){var e=[];i.O=function(t,l,a,o){if(!l){var s=1/0;for(c=0;c<e.length;c++){l=e[c][0],a=e[c][1],o=e[c][2];for(var n=!0,d=0;d<l.length;d++)(!1&o||s>=o)&&Object.keys(i.O).every((function(e){return i.O[e](l[d])}))?l.splice(d--,1):(n=!1,o<s&&(s=o));if(n){e.splice(c--,1);var r=a();void 0!==r&&(t=r)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=95}(),function(){var e={95:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,o,s=l[0],n=l[1],d=l[2],r=0;if(s.some((function(t){return 0!==e[t]}))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(d)var c=d(i)}for(t&&t(l);r<s.length;r++)o=s[r],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},l=self["webpackChunk"]=self["webpackChunk"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[998],(function(){return i(5916)}));l=i.O(l)})();